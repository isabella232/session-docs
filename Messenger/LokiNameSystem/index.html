



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://docs.getsession.org/Messenger/LokiNameSystem/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../SESSION.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Loki Name System - Session Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../CSS/style.css">
    
      <link rel="stylesheet" href="../../CSS/font.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#loki-name-system" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.getsession.org" title="Session Docs" aria-label="Session Docs" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../../logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Session Docs
            </span>
            <span class="md-header-nav__topic">
              
                Loki Name System
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/loki-project/session-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    lokidocs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../HowToRegisterSessionNames/" class="md-tabs__link">
          Guides
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.getsession.org" title="Session Docs" class="md-nav__button md-logo">
      
        <img alt="logo" src="../../logo.png" width="48" height="48">
      
    </a>
    Session Docs
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/loki-project/session-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    lokidocs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Loki Name System
      </label>
    
    <a href="./" title="Loki Name System" class="md-nav__link md-nav__link--active">
      Loki Name System
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-register-a-sessionwallet-name" class="md-nav__link">
    How to register a Session/Wallet name.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#namespaces" class="md-nav__link">
    Namespaces
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#names" class="md-nav__link">
    Names
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    Time
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ownership-transfer-updates-and-management" class="md-nav__link">
    Ownership, Transfer, Updates and management
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cost" class="md-nav__link">
    Cost
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#privacy" class="md-nav__link">
    Privacy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#technical-documentation" class="md-nav__link">
    Technical Documentation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#record-encryptiondecryption" class="md-nav__link">
    Record Encryption/Decryption
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#name_hashed" class="md-nav__link">
    name_hashed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encrypted_value" class="md-nav__link">
    encrypted_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#owners" class="md-nav__link">
    Owners
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#record-updating" class="md-nav__link">
    Record Updating
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../threat_model/" title="Threat Models" class="md-nav__link">
      Threat Models
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../infrastructure/" title="Infrastructure" class="md-nav__link">
      Infrastructure
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../message_routing/" title="Message Routing" class="md-nav__link">
      Message Routing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../group_chats/" title="Group Chats" class="md-nav__link">
      Group Chats
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../multidevice/" title="Multi-Device" class="md-nav__link">
      Multi-Device
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../client_side_protection/" title="Client Side Protection" class="md-nav__link">
      Client Side Protection
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../attachments/" title="Attachments" class="md-nav__link">
      Attachments
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../HowToRegisterSessionNames/" title="Register Session/Wallet names" class="md-nav__link">
      Register Session/Wallet names
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multi_device_setup/" title="Multi-Device Setup" class="md-nav__link">
      Multi-Device Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../opengroup_setup/" title="OpenGroup Setup" class="md-nav__link">
      OpenGroup Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JoinOpenGroupMobile/" title="Join Open Group on Mobile" class="md-nav__link">
      Join Open Group on Mobile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JoinOpenGroupDesktop/" title="Join Open Group on Desktop" class="md-nav__link">
      Join Open Group on Desktop
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-register-a-sessionwallet-name" class="md-nav__link">
    How to register a Session/Wallet name.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#namespaces" class="md-nav__link">
    Namespaces
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#names" class="md-nav__link">
    Names
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    Time
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ownership-transfer-updates-and-management" class="md-nav__link">
    Ownership, Transfer, Updates and management
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cost" class="md-nav__link">
    Cost
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#privacy" class="md-nav__link">
    Privacy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#technical-documentation" class="md-nav__link">
    Technical Documentation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#record-encryptiondecryption" class="md-nav__link">
    Record Encryption/Decryption
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#name_hashed" class="md-nav__link">
    name_hashed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encrypted_value" class="md-nav__link">
    encrypted_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#owners" class="md-nav__link">
    Owners
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#record-updating" class="md-nav__link">
    Record Updating
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/loki-project/session-docs/edit/master/docs/Messenger/LokiNameSystem.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="loki-name-system">Loki Name System<a class="headerlink" href="#loki-name-system" title="Permanent link">&para;</a></h1>
<p>LNS will be released in a limited capacity on the 25th of March alongside the Valiant Vidar hard fork, so it’s important to communicate what you will be able to do with LNS when it launches. </p>
<h2 id="how-to-register-a-sessionwallet-name">How to register a Session/Wallet name.<a class="headerlink" href="#how-to-register-a-sessionwallet-name" title="Permanent link">&para;</a></h2>
<p>Go to the <a href="../HowToRegisterSessionNames/">How to register Session/Wallet name guide</a>.</p>
<h2 id="namespaces">Namespaces<a class="headerlink" href="#namespaces" title="Permanent link">&para;</a></h2>
<p>The LNS namespace is broken up into two distinct sections, one section is responsible for all lokinet names, referred to as <code>.loki</code> names and the other section is responsible for Wallet and Session usernames. </p>
<p>On the initial release we will only be allowing the registration of Wallet and Session usernames.</p>
<h2 id="names">Names<a class="headerlink" href="#names" title="Permanent link">&para;</a></h2>
<p>Each LNS name can resolve to a Session public key, Wallet address or <code>.loki</code> address. Session and Wallet names are within the same namespace. When purchasing a Session record, the Wallet record is automatically added to your possession. Lokinet names are in their own namespaces. For example, when purchasing ‘KeeJef’ in the Session namespace, you can assign a Session public key. Additionally you can update the wallet record under a 2nd transaction.</p>
<p>So when a user looks up ‘KeeJef’ they are returned both a Session ID and Wallet address, </p>
<div class="codehilite"><pre><span></span><code>SessionID: 053b6b764388cd6c4d38ae0b3e7492a8ecf0076e270c013bb5693d973045f45254 
Wallet Address: LBMTVEK8WRiC9rmfoKEjyrZSRje6PdiTU6926LjMkGMUdzyApMvXUbH4LswHnLjMjMPLUbDKiL3RCRQe5XFiobWb8jQrApR
</code></pre></div>


<p>It is also possible to purchase ‘KeeJef.loki’ in the Lokinet namespace that is unique from the Session and Wallet namespace. However this will not be available immediately.</p>
<p>Depending on which context the name is being used, the application will automatically use the relevant mapping. </p>
<h2 id="rules">Rules<a class="headerlink" href="#rules" title="Permanent link">&para;</a></h2>
<p>Each namespace, (Session and Wallet) (Lokinet) have restrictions on the characters allowed in the name. All names are case-insensitive.</p>
<p>For Session, the name has to start with a (alphanumeric or underscore), and can have (alphanumeric, hyphens or underscores) in between and must end with a (alphanumeric or underscore). Users may register names with special characters or emojis by using the equivalent Punycode representation. The name must be at least 1 character, and at most- 64 characters long.</p>
<p>For Lokinet, the domain has to start with an alphanumeric, and can have (alphanumeric or hyphens) in between. The character before the domain suffix <char><code>.loki</code> must be alphanumeric followed by the suffix <code>.loki</code>. Users may register names with special characters or emojis by using the equivalent Punycode representation. The domain name must be at most 253 characters long, including the <code>.loki</code> suffix.</p>
<h2 id="time">Time<a class="headerlink" href="#time" title="Permanent link">&para;</a></h2>
<p>By default all mappings in the Session/Wallet namespace will be preserved forever, this is important to ensure that wallet mappings don't change when a user wants to send money to a name. The <code>.loki</code> namespace will have reregistration periods to deter domain squatting and release names if the keys that registered them are lost.</p>
<h2 id="ownership-transfer-updates-and-management">Ownership, Transfer, Updates and management<a class="headerlink" href="#ownership-transfer-updates-and-management" title="Permanent link">&para;</a></h2>
<p>By default names are owned by the wallet address that purchased the name. However names can also be purchased on behalf of another user. Up to 2 wallet addresses may be specified as the owners of a name. This means up to 2 wallets to update and or transfer ownership of the record.</p>
<p>Once a domain is owned it can be transferred to another user's Loki wallet by specifying the address of that wallet and paying the standard transaction fee to transfer the ownership. </p>
<p>Updates to mappings can be made at any time by the owner, at the cost of the standard transaction fee to include the new mapping in the blockchain.</p>
<p>Management of all owned names will be possible through the Loki Desktop Wallet initially however we aim to add functionality to register and manage names to the Session software in the future. </p>
<h2 id="cost">Cost<a class="headerlink" href="#cost" title="Permanent link">&para;</a></h2>
<p>Names in the Session/Wallet namespace cost 20 Loki to register, We will try to update this cost per hardfork to target the $5-10 USD range.</p>
<h2 id="privacy">Privacy<a class="headerlink" href="#privacy" title="Permanent link">&para;</a></h2>
<p>It is up to each user to choose what information they map publicly, if you don’t want to map your Session ID or Wallet address to your real world identity you might want to choose a different alias instead of something related to your name. Basic encryption is employed to mask publicity of data on the surface level, however please do not rely on this for critical privacy requirements. See the Loki Name Service technical document for more information.</p>
<p>All wallet sub-addresses generated via account new are supported as owners.</p>
<h2 id="technical-documentation">Technical Documentation<a class="headerlink" href="#technical-documentation" title="Permanent link">&para;</a></h2>
<h3 id="record-encryptiondecryption">Record Encryption/Decryption<a class="headerlink" href="#record-encryptiondecryption" title="Permanent link">&para;</a></h3>
<p>LNS records stored in the blockchain undergo basic encryption and decryption to deter monitoring of the chain. It does not provide strong guarantees for privacy and should not be relied on for critical privacy usage.</p>
<p>At its core, a typical LNS record from the database looks like</p>
<ul>
<li><code>name_hashed</code></li>
<li><code>encrypted_value</code></li>
<li><code>register_height</code></li>
<li><code>owner</code></li>
<li><code>backup_owner</code></li>
<li><code>txid</code></li>
<li><code>prev_txid</code></li>
<li><code>register_height</code></li>
<li>more fields (implementation details, see loki_name_system.h)</li>
</ul>
<p>Of which, <code>name_hashed</code> and <code>encrypted_value</code> use some form of encryption or decryption.</p>
<h3 id="name_hashed"><code>name_hashed</code><a class="headerlink" href="#name_hashed" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Human readable name is hashed with <code>blake2b</code> with the following parameters</p>
<ul>
<li>Key Length: 0 bytes</li>
<li>Hash Length: 32 bytes</li>
</ul>
</li>
<li>
<p>Name hash converted to base64 for storage into the <code>sqlite3</code> database (this provides optimal lexicographic lookup as a key).</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><code>    hash32 = Blake2B(name, key=0)
    name_hash = Base64Encode(hash32)
</code></pre></div>


<h3 id="encrypted_value"><code>encrypted_value</code><a class="headerlink" href="#encrypted_value" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Generate the secret key for decryption/encryption using the unhashed name with <code>Argon2ID v1.3</code> and the following parameters as of Valiant Vidar v7.1.X</p>
<ul>
<li>Iterations: 3</li>
<li>Memory: 268_435_456 bytes</li>
<li>Salt Length: 0 bytes</li>
<li>Key Length: 32 bytes</li>
</ul>
</li>
<li>
<p>Decrypt/encrypt the value represented in binary with <code>XSalsa20Poly1305</code> and the following parameters as of Valiant Vidar v7.1.X</p>
<ul>
<li>Nonce: 0 bytes</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code>    key32 = Argon2ID(iterations=3, memory=268435436, salt=0)
    encrypted_value = XSalsa20Poly1305Encrypt(value, key32, nonce=0)
    decrypted_value = XSalsa20Poly1305Decrypt(encrypted_value, key32, nonce=0)
</code></pre></div>


<h3 id="owners">Owners<a class="headerlink" href="#owners" title="Permanent link">&para;</a></h3>
<p>In the Loki Name System (LNS), an owner of a record has the ability to update information about the record by making a transaction on the Loki blockchain. Owners are specified when buying a record and in LNS we support 2 types. A standard Ed25519 keypair and a Loki Wallet address.</p>
<p>By default, the wallet is configured to assign itself as the owner of the mapping when purchased.</p>
<h3 id="record-updating">Record Updating<a class="headerlink" href="#record-updating" title="Permanent link">&para;</a></h3>
<p>LNS records can be updated by getting the owner of the record to generate a signature that authorises the protocol to update fields in the record.</p>
<p>The following fields can be updated in the record</p>
<div class="codehilite"><pre><span></span><code>Value
Owner
Backup Owner
</code></pre></div>


<ul>
<li>Copy the fields to update into a buffer</li>
<li>Copy the TXID into the buffer that last updated the record (which can be retrieved by querying the mapping).</li>
<li>
<p>Hash the buffer with <code>blake2b</code> with the following parameters</p>
<ul>
<li>Key Length: 0 bytes</li>
<li>Hash Length: 32 bytes</li>
</ul>
</li>
<li>
<p>Sign the hashed buffer</p>
<ul>
<li>If the current owner (or backup owner) is a wallet address, it must be signed with the current owner's (or backup owner's) wallet secret spend key.</li>
<li>If the current owner (or backup owner) is a ed25519 key, it must be signed with the current owner's (or backup owner's) ed25519 secret key.</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code>    // *If value is specified, copy the value to the buffer, otherwise skip.
    buffer[] = {*binary_value, *owner, *backup_owner, prev_txid}
    hash32 = Blake2B(buffer, key=0)

    if (monero)
        signature = generate_signature(hash32, spend_pkey, spend_skey)
    else
        signature = ed25519_signature(hash32, ed25519_skey)
</code></pre></div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../.." title="Home" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </span>
            </div>
          </a>
        
        
          <a href="../threat_model/" title="Threat Models" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Threat Models
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/loki-project" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/session_app" target="_blank" rel="noopener" title="twitter" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.youtube.com/lokinetwork" target="_blank" rel="noopener" title="youtube" class="md-footer-social__link fa fa-youtube"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../.."}})</script>
      
        <script src="../../JAVASCRIPT/links.js"></script>
      
        <script src="../../JAVASCRIPT/style.js"></script>
      
    
  </body>
</html>